<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Send push notifications to your phone via PUT/POST"><link href=https://ntfy.sh/subscribe/api/ rel=canonical><link href=../cli/ rel=prev><link href=../../install/ rel=next><link rel=icon href=../../static/img/favicon.ico><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.1"><title>Using the API - ntfy</title><link rel=stylesheet href=../../assets/stylesheets/main.45e1311d.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=stylesheet href=../../static/css/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#subscribe-via-api class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <style>
    div[data-md-component="announce"] {
        z-index: 10;
    }

    div[data-md-component="announce"] a {
        color: white;
    }

    div[data-md-component="announce"] a:hover, div[data-md-component="announce"] a:focus {
        transition: ease-in 150ms;
        color: #ccc;
    }

    div[data-md-component="announce"] .md-banner__button {
        color: #ccc;
    }

    div[data-md-component="announce"] .md-banner.hidden {
        display: none;
    }

    div[data-md-component="announce"] .twemoji {
        margin-top: 2px;
    }
</style> <button id=announce-bar-close class="md-banner__button md-icon" aria-label="Don't show this again"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"> <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path> </svg> </button> If you like ntfy, please consider sponsoring me via <a target=_blank href=https://github.com/sponsors/binwiederhier><strong>GitHub Sponsors</strong></a> or <a href=https://en.liberapay.com/ntfy/ target=_blank><strong>Liberapay</strong></a> <svg xmlns=http://www.w3.org/2000/svg role=img viewbox="0 0 36 36" class="twemoji md-footer-custom-text"> <path fill=#DD2E44 d="M35.885 11.833c0-5.45-4.418-9.868-9.867-9.868-3.308 0-6.227 1.633-8.018 4.129-1.791-2.496-4.71-4.129-8.017-4.129-5.45 0-9.868 4.417-9.868 9.868 0 .772.098 1.52.266 2.241C1.751 22.587 11.216 31.568 18 34.034c6.783-2.466 16.249-11.447 17.617-19.959.17-.721.268-1.469.268-2.242z"/> </svg>, or subscribing to <a target=_blank href=https://ntfy.sh/app><strong>ntfy Pro</strong></a>. <script>
    announceBarKey = 'announce-bar-closed-sponsor';
    document.getElementById('announce-bar-close').addEventListener('click', (e) => {
        localStorage.setItem(announceBarKey, 'true');
        document.querySelector('div[data-md-component="announce"] .md-banner').style.display = 'none';
    });
    if (localStorage.getItem(announceBarKey) === 'true') {
        document.querySelector('div[data-md-component="announce"] .md-banner').style.display = 'none';
    }
</script> </div> </aside> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=/ title=ntfy class="md-header__button md-logo" aria-label=ntfy data-md-component=logo> <img src=../../static/img/ntfy.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ntfy </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Using the API </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/binwiederhier/ntfy title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> binwiederhier/ntfy </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=/ title=ntfy class="md-nav__button md-logo" aria-label=ntfy data-md-component=logo> <img src=../../static/img/ntfy.png alt=logo> </a> ntfy </label> <div class=md-nav__source> <a href=https://github.com/binwiederhier/ntfy title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> binwiederhier/ntfy </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Getting started </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Publishing </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Publishing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../publish/ class=md-nav__link> <span class=md-ellipsis> Sending messages </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Subscribing </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Subscribing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../phone/ class=md-nav__link> <span class=md-ellipsis> From your phone </span> </a> </li> <li class=md-nav__item> <a href=../web/ class=md-nav__link> <span class=md-ellipsis> From the Web app </span> </a> </li> <li class=md-nav__item> <a href=../pwa/ class=md-nav__link> <span class=md-ellipsis> From the Desktop </span> </a> </li> <li class=md-nav__item> <a href=../cli/ class=md-nav__link> <span class=md-ellipsis> From the CLI </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Using the API </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Using the API </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#http-stream class=md-nav__link> <span class=md-ellipsis> HTTP stream </span> </a> <nav class=md-nav aria-label="HTTP stream"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#subscribe-as-json-stream class=md-nav__link> <span class=md-ellipsis> Subscribe as JSON stream </span> </a> </li> <li class=md-nav__item> <a href=#subscribe-as-sse-stream class=md-nav__link> <span class=md-ellipsis> Subscribe as SSE stream </span> </a> </li> <li class=md-nav__item> <a href=#subscribe-as-raw-stream class=md-nav__link> <span class=md-ellipsis> Subscribe as raw stream </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#websockets class=md-nav__link> <span class=md-ellipsis> WebSockets </span> </a> </li> <li class=md-nav__item> <a href=#advanced-features class=md-nav__link> <span class=md-ellipsis> Advanced features </span> </a> <nav class=md-nav aria-label="Advanced features"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#poll-for-messages class=md-nav__link> <span class=md-ellipsis> Poll for messages </span> </a> </li> <li class=md-nav__item> <a href=#fetch-cached-messages class=md-nav__link> <span class=md-ellipsis> Fetch cached messages </span> </a> </li> <li class=md-nav__item> <a href=#fetch-scheduled-messages class=md-nav__link> <span class=md-ellipsis> Fetch scheduled messages </span> </a> </li> <li class=md-nav__item> <a href=#filter-messages class=md-nav__link> <span class=md-ellipsis> Filter messages </span> </a> </li> <li class=md-nav__item> <a href=#subscribe-to-multiple-topics class=md-nav__link> <span class=md-ellipsis> Subscribe to multiple topics </span> </a> </li> <li class=md-nav__item> <a href=#authentication class=md-nav__link> <span class=md-ellipsis> Authentication </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#json-message-format class=md-nav__link> <span class=md-ellipsis> JSON message format </span> </a> </li> <li class=md-nav__item> <a href=#list-of-all-parameters class=md-nav__link> <span class=md-ellipsis> List of all parameters </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Self-hosting </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Self-hosting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../install/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../config/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex> <span class=md-ellipsis> Other things </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Other things </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../faq/ class=md-nav__link> <span class=md-ellipsis> FAQs </span> </a> </li> <li class=md-nav__item> <a href=../../examples/ class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> <li class=md-nav__item> <a href=../../integrations/ class=md-nav__link> <span class=md-ellipsis> Integrations + projects </span> </a> </li> <li class=md-nav__item> <a href=../../releases/ class=md-nav__link> <span class=md-ellipsis> Release notes </span> </a> </li> <li class=md-nav__item> <a href=../../emojis/ class=md-nav__link> <span class=md-ellipsis> Emojis 🥳 🎉 </span> </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> <li class=md-nav__item> <a href=../../known-issues/ class=md-nav__link> <span class=md-ellipsis> Known issues </span> </a> </li> <li class=md-nav__item> <a href=../../deprecations/ class=md-nav__link> <span class=md-ellipsis> Deprecation notices </span> </a> </li> <li class=md-nav__item> <a href=../../develop/ class=md-nav__link> <span class=md-ellipsis> Development </span> </a> </li> <li class=md-nav__item> <a href=../../privacy/ class=md-nav__link> <span class=md-ellipsis> Privacy policy </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=subscribe-via-api>Subscribe via API<a class=headerlink href=#subscribe-via-api title="Permanent link">&para;</a></h1> <p>You can create and subscribe to a topic in the <a href=../web/ >web UI</a>, via the <a href=../phone/ >phone app</a>, via the <a href=../cli/ >ntfy CLI</a>, or in your own app or script by subscribing the API. This page describes how to subscribe via API. You may also want to check out the page that describes how to <a href=../../publish/ >publish messages</a>.</p> <p>You can consume the subscription API as either a <strong><a href=#http-stream>simple HTTP stream (JSON, SSE or raw)</a></strong>, or <strong><a href=#websockets>via WebSockets</a></strong>. Both are incredibly simple to use.</p> <h2 id=http-stream>HTTP stream<a class=headerlink href=#http-stream title="Permanent link">&para;</a></h2> <p>The HTTP stream-based API relies on a simple GET request with a streaming HTTP response, i.e <strong>you open a GET request and the connection stays open forever</strong>, sending messages back as they come in. There are three different API endpoints, which only differ in the response format:</p> <ul> <li><a href=#subscribe-as-json-stream>JSON stream</a>: <code>&lt;topic&gt;/json</code> returns a JSON stream, with one JSON message object per line</li> <li><a href=#subscribe-as-sse-stream>SSE stream</a>: <code>&lt;topic&gt;/sse</code> returns messages as <a href=https://en.wikipedia.org/wiki/Server-sent_events>Server-Sent Events (SSE)</a>, which can be used with <a href=https://developer.mozilla.org/en-US/docs/Web/API/EventSource>EventSource</a></li> <li><a href=#subscribe-as-raw-stream>Raw stream</a>: <code>&lt;topic&gt;/raw</code> returns messages as raw text, with one line per message</li> </ul> <h3 id=subscribe-as-json-stream>Subscribe as JSON stream<a class=headerlink href=#subscribe-as-json-stream title="Permanent link">&para;</a></h3> <p>Here are a few examples of how to consume the JSON endpoint (<code>&lt;topic&gt;/json</code>). For almost all languages, <strong>this is the recommended way to subscribe to a topic</strong>. The notable exception is JavaScript, for which the <a href=#subscribe-as-sse-stream>SSE/EventSource stream</a> is much easier to work with.</p> <div class="tabbed-set tabbed-alternate" data-tabs=1:6><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><input id=__tabbed_1_3 name=__tabbed_1 type=radio><input id=__tabbed_1_4 name=__tabbed_1 type=radio><input id=__tabbed_1_5 name=__tabbed_1 type=radio><input id=__tabbed_1_6 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>Command line (curl)</label><label for=__tabbed_1_2>ntfy CLI</label><label for=__tabbed_1_3>HTTP</label><label for=__tabbed_1_4>Go</label><label for=__tabbed_1_5>Python</label><label for=__tabbed_1_6>PHP</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class=highlight><pre><span></span><code>$ curl -s ntfy.sh/disk-alerts/json
{&quot;id&quot;:&quot;SLiKI64DOt&quot;,&quot;time&quot;:1635528757,&quot;event&quot;:&quot;open&quot;,&quot;topic&quot;:&quot;mytopic&quot;}
{&quot;id&quot;:&quot;hwQ2YpKdmg&quot;,&quot;time&quot;:1635528741,&quot;event&quot;:&quot;message&quot;,&quot;topic&quot;:&quot;mytopic&quot;,&quot;message&quot;:&quot;Disk full&quot;}
{&quot;id&quot;:&quot;DGUDShMCsc&quot;,&quot;time&quot;:1635528787,&quot;event&quot;:&quot;keepalive&quot;,&quot;topic&quot;:&quot;mytopic&quot;}
...
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code>$ ntfy subcribe disk-alerts
{&quot;id&quot;:&quot;hwQ2YpKdmg&quot;,&quot;time&quot;:1635528741,&quot;event&quot;:&quot;message&quot;,&quot;topic&quot;:&quot;mytopic&quot;,&quot;message&quot;:&quot;Disk full&quot;}
...
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=nf>GET</span> <span class=nn>/disk-alerts/json</span> <span class=kr>HTTP</span><span class=o>/</span><span class=m>1.1</span>
<span class=na>Host</span><span class=o>:</span> <span class=l>ntfy.sh</span>

HTTP/1.1 200 OK
Content-Type: application/x-ndjson; charset=utf-8
Transfer-Encoding: chunked

{&quot;id&quot;:&quot;SLiKI64DOt&quot;,&quot;time&quot;:1635528757,&quot;event&quot;:&quot;open&quot;,&quot;topic&quot;:&quot;mytopic&quot;}
{&quot;id&quot;:&quot;hwQ2YpKdmg&quot;,&quot;time&quot;:1635528741,&quot;event&quot;:&quot;message&quot;,&quot;topic&quot;:&quot;mytopic&quot;,&quot;message&quot;:&quot;Disk full&quot;}
{&quot;id&quot;:&quot;DGUDShMCsc&quot;,&quot;time&quot;:1635528787,&quot;event&quot;:&quot;keepalive&quot;,&quot;topic&quot;:&quot;mytopic&quot;}
...
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=nx>resp</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>Get</span><span class=p>(</span><span class=s>&quot;https://ntfy.sh/disk-alerts/json&quot;</span><span class=p>)</span>
<span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>log</span><span class=p>.</span><span class=nx>Fatal</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
<span class=p>}</span>
<span class=k>defer</span><span class=w> </span><span class=nx>resp</span><span class=p>.</span><span class=nx>Body</span><span class=p>.</span><span class=nx>Close</span><span class=p>()</span>
<span class=nx>scanner</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>bufio</span><span class=p>.</span><span class=nx>NewScanner</span><span class=p>(</span><span class=nx>resp</span><span class=p>.</span><span class=nx>Body</span><span class=p>)</span>
<span class=k>for</span><span class=w> </span><span class=nx>scanner</span><span class=p>.</span><span class=nx>Scan</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nb>println</span><span class=p>(</span><span class=nx>scanner</span><span class=p>.</span><span class=nx>Text</span><span class=p>())</span>
<span class=p>}</span>
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=n>resp</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;https://ntfy.sh/disk-alerts/json&quot;</span><span class=p>,</span> <span class=n>stream</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>resp</span><span class=o>.</span><span class=n>iter_lines</span><span class=p>():</span>
  <span class=k>if</span> <span class=n>line</span><span class=p>:</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>line</span><span class=p>)</span>
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=nv>$fp</span> <span class=o>=</span> <span class=nb>fopen</span><span class=p>(</span><span class=s1>&#39;https://ntfy.sh/disk-alerts/json&#39;</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>);</span>
<span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nv>$fp</span><span class=p>)</span> <span class=k>die</span><span class=p>(</span><span class=s1>&#39;cannot open stream&#39;</span><span class=p>);</span>
<span class=k>while</span> <span class=p>(</span><span class=o>!</span><span class=nb>feof</span><span class=p>(</span><span class=nv>$fp</span><span class=p>))</span> <span class=p>{</span>
    <span class=k>echo</span> <span class=nb>fgets</span><span class=p>(</span><span class=nv>$fp</span><span class=p>,</span> <span class=mi>2048</span><span class=p>);</span>
    <span class=nb>flush</span><span class=p>();</span>
<span class=p>}</span>
<span class=nb>fclose</span><span class=p>(</span><span class=nv>$fp</span><span class=p>);</span>
</code></pre></div> </div> </div> </div> <h3 id=subscribe-as-sse-stream>Subscribe as SSE stream<a class=headerlink href=#subscribe-as-sse-stream title="Permanent link">&para;</a></h3> <p>Using <a href=https://developer.mozilla.org/en-US/docs/Web/API/EventSource>EventSource</a> in JavaScript, you can consume notifications via a <a href=https://en.wikipedia.org/wiki/Server-sent_events>Server-Sent Events (SSE)</a> stream. It's incredibly easy to use. Here's what it looks like. You may also want to check out the <a href=https://github.com/binwiederhier/ntfy/tree/main/examples/web-example-eventsource>full example on GitHub</a>.</p> <div class="tabbed-set tabbed-alternate" data-tabs=2:3><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><input id=__tabbed_2_2 name=__tabbed_2 type=radio><input id=__tabbed_2_3 name=__tabbed_2 type=radio><div class=tabbed-labels><label for=__tabbed_2_1>Command line (curl)</label><label for=__tabbed_2_2>HTTP</label><label for=__tabbed_2_3>JavaScript</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class=highlight><pre><span></span><code>$ curl -s ntfy.sh/mytopic/sse
event: open
data: {&quot;id&quot;:&quot;weSj9RtNkj&quot;,&quot;time&quot;:1635528898,&quot;event&quot;:&quot;open&quot;,&quot;topic&quot;:&quot;mytopic&quot;}

data: {&quot;id&quot;:&quot;p0M5y6gcCY&quot;,&quot;time&quot;:1635528909,&quot;event&quot;:&quot;message&quot;,&quot;topic&quot;:&quot;mytopic&quot;,&quot;message&quot;:&quot;Hi!&quot;}

event: keepalive
data: {&quot;id&quot;:&quot;VNxNIg5fpt&quot;,&quot;time&quot;:1635528928,&quot;event&quot;:&quot;keepalive&quot;,&quot;topic&quot;:&quot;test&quot;}
...
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=nf>GET</span> <span class=nn>/mytopic/sse</span> <span class=kr>HTTP</span><span class=o>/</span><span class=m>1.1</span>
<span class=na>Host</span><span class=o>:</span> <span class=l>ntfy.sh</span>

HTTP/1.1 200 OK
Content-Type: text/event-stream; charset=utf-8
Transfer-Encoding: chunked

event: open
data: {&quot;id&quot;:&quot;weSj9RtNkj&quot;,&quot;time&quot;:1635528898,&quot;event&quot;:&quot;open&quot;,&quot;topic&quot;:&quot;mytopic&quot;}

data: {&quot;id&quot;:&quot;p0M5y6gcCY&quot;,&quot;time&quot;:1635528909,&quot;event&quot;:&quot;message&quot;,&quot;topic&quot;:&quot;mytopic&quot;,&quot;message&quot;:&quot;Hi!&quot;}

event: keepalive
data: {&quot;id&quot;:&quot;VNxNIg5fpt&quot;,&quot;time&quot;:1635528928,&quot;event&quot;:&quot;keepalive&quot;,&quot;topic&quot;:&quot;test&quot;}
...
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>eventSource</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>EventSource</span><span class=p>(</span><span class=s1>&#39;https://ntfy.sh/mytopic/sse&#39;</span><span class=p>);</span>
<span class=nx>eventSource</span><span class=p>.</span><span class=nx>onmessage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
<span class=p>};</span>
</code></pre></div> </div> </div> </div> <h3 id=subscribe-as-raw-stream>Subscribe as raw stream<a class=headerlink href=#subscribe-as-raw-stream title="Permanent link">&para;</a></h3> <p>The <code>/raw</code> endpoint will output one line per message, and <strong>will only include the message body</strong>. It's useful for extremely simple scripts, and doesn't include all the data. Additional fields such as <a href=../../publish/#message-priority>priority</a>, <a href=../../publish/#tags--emojis-->tags</a> or <a href=../../publish/#message-title>message title</a> are not included in this output format. Keepalive messages are sent as empty lines.</p> <div class="tabbed-set tabbed-alternate" data-tabs=3:5><input checked=checked id=__tabbed_3_1 name=__tabbed_3 type=radio><input id=__tabbed_3_2 name=__tabbed_3 type=radio><input id=__tabbed_3_3 name=__tabbed_3 type=radio><input id=__tabbed_3_4 name=__tabbed_3 type=radio><input id=__tabbed_3_5 name=__tabbed_3 type=radio><div class=tabbed-labels><label for=__tabbed_3_1>Command line (curl)</label><label for=__tabbed_3_2>HTTP</label><label for=__tabbed_3_3>Go</label><label for=__tabbed_3_4>Python</label><label for=__tabbed_3_5>PHP</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class=highlight><pre><span></span><code>$ curl -s ntfy.sh/disk-alerts/raw

Disk full
...
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=nf>GET</span> <span class=nn>/disk-alerts/raw</span> <span class=kr>HTTP</span><span class=o>/</span><span class=m>1.1</span>
<span class=na>Host</span><span class=o>:</span> <span class=l>ntfy.sh</span>

HTTP/1.1 200 OK
Content-Type: text/plain; charset=utf-8
Transfer-Encoding: chunked

Disk full
...
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=nx>resp</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>http</span><span class=p>.</span><span class=nx>Get</span><span class=p>(</span><span class=s>&quot;https://ntfy.sh/disk-alerts/raw&quot;</span><span class=p>)</span>
<span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>log</span><span class=p>.</span><span class=nx>Fatal</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
<span class=p>}</span>
<span class=k>defer</span><span class=w> </span><span class=nx>resp</span><span class=p>.</span><span class=nx>Body</span><span class=p>.</span><span class=nx>Close</span><span class=p>()</span>
<span class=nx>scanner</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>bufio</span><span class=p>.</span><span class=nx>NewScanner</span><span class=p>(</span><span class=nx>resp</span><span class=p>.</span><span class=nx>Body</span><span class=p>)</span>
<span class=k>for</span><span class=w> </span><span class=nx>scanner</span><span class=p>.</span><span class=nx>Scan</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nb>println</span><span class=p>(</span><span class=nx>scanner</span><span class=p>.</span><span class=nx>Text</span><span class=p>())</span>
<span class=p>}</span>
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=n>resp</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;https://ntfy.sh/disk-alerts/raw&quot;</span><span class=p>,</span> <span class=n>stream</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>resp</span><span class=o>.</span><span class=n>iter_lines</span><span class=p>():</span>
  <span class=k>if</span> <span class=n>line</span><span class=p>:</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>line</span><span class=p>)</span>
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=nv>$fp</span> <span class=o>=</span> <span class=nb>fopen</span><span class=p>(</span><span class=s1>&#39;https://ntfy.sh/disk-alerts/raw&#39;</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>);</span>
<span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nv>$fp</span><span class=p>)</span> <span class=k>die</span><span class=p>(</span><span class=s1>&#39;cannot open stream&#39;</span><span class=p>);</span>
<span class=k>while</span> <span class=p>(</span><span class=o>!</span><span class=nb>feof</span><span class=p>(</span><span class=nv>$fp</span><span class=p>))</span> <span class=p>{</span>
    <span class=k>echo</span> <span class=nb>fgets</span><span class=p>(</span><span class=nv>$fp</span><span class=p>,</span> <span class=mi>2048</span><span class=p>);</span>
    <span class=nb>flush</span><span class=p>();</span>
<span class=p>}</span>
<span class=nb>fclose</span><span class=p>(</span><span class=nv>$fp</span><span class=p>);</span>
</code></pre></div> </div> </div> </div> <h2 id=websockets>WebSockets<a class=headerlink href=#websockets title="Permanent link">&para;</a></h2> <p>You may also subscribe to topics via <a href=https://en.wikipedia.org/wiki/WebSocket>WebSockets</a>, which is also widely supported in many languages. Most notably, WebSockets are natively supported in JavaScript. You may also want to check out the <a href=https://github.com/binwiederhier/ntfy/tree/main/examples/web-example-websocket>full example on GitHub</a>. On the command line, I recommend <a href=https://github.com/vi/websocat>websocat</a>, a fantastic tool similar to <code>socat</code> or <code>curl</code>, but specifically for WebSockets.</p> <p>The WebSockets endpoint is available at <code>&lt;topic&gt;/ws</code> and returns messages as JSON objects similar to the <a href=#subscribe-as-json-stream>JSON stream endpoint</a>. </p> <div class="tabbed-set tabbed-alternate" data-tabs=4:4><input checked=checked id=__tabbed_4_1 name=__tabbed_4 type=radio><input id=__tabbed_4_2 name=__tabbed_4 type=radio><input id=__tabbed_4_3 name=__tabbed_4 type=radio><input id=__tabbed_4_4 name=__tabbed_4 type=radio><div class=tabbed-labels><label for=__tabbed_4_1>Command line (websocat)</label><label for=__tabbed_4_2>HTTP</label><label for=__tabbed_4_3>Go</label><label for=__tabbed_4_4>JavaScript</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class=highlight><pre><span></span><code>$ websocat wss://ntfy.sh/mytopic/ws
{&quot;id&quot;:&quot;qRHUCCvjj8&quot;,&quot;time&quot;:1642307388,&quot;event&quot;:&quot;open&quot;,&quot;topic&quot;:&quot;mytopic&quot;}
{&quot;id&quot;:&quot;eOWoUBJ14x&quot;,&quot;time&quot;:1642307754,&quot;event&quot;:&quot;message&quot;,&quot;topic&quot;:&quot;mytopic&quot;,&quot;message&quot;:&quot;hi there&quot;}
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=nf>GET</span> <span class=nn>/disk-alerts/ws</span> <span class=kr>HTTP</span><span class=o>/</span><span class=m>1.1</span>
<span class=na>Host</span><span class=o>:</span> <span class=l>ntfy.sh</span>
<span class=na>Upgrade</span><span class=o>:</span> <span class=l>websocket</span>
<span class=na>Connection</span><span class=o>:</span> <span class=l>Upgrade</span>

HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
...
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=s>&quot;github.com/gorilla/websocket&quot;</span>
<span class=nx>ws</span><span class=p>,</span><span class=w> </span><span class=nx>_</span><span class=p>,</span><span class=w> </span><span class=nx>_</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>websocket</span><span class=p>.</span><span class=nx>DefaultDialer</span><span class=p>.</span><span class=nx>Dial</span><span class=p>(</span><span class=s>&quot;wss://ntfy.sh/mytopic/ws&quot;</span><span class=p>,</span><span class=w> </span><span class=kc>nil</span><span class=p>)</span>
<span class=nx>messageType</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>ws</span><span class=p>.</span><span class=nx>ReadMessage</span><span class=p>()</span>
<span class=o>...</span>
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>socket</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WebSocket</span><span class=p>(</span><span class=s1>&#39;wss://ntfy.sh/mytopic/ws&#39;</span><span class=p>);</span>
<span class=nx>socket</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;message&#39;</span><span class=p>,</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> <h2 id=advanced-features>Advanced features<a class=headerlink href=#advanced-features title="Permanent link">&para;</a></h2> <h3 id=poll-for-messages>Poll for messages<a class=headerlink href=#poll-for-messages title="Permanent link">&para;</a></h3> <p>You can also just poll for messages if you don't like the long-standing connection using the <code>poll=1</code> query parameter. The connection will end after all available messages have been read. This parameter can be combined with <code>since=</code> (defaults to <code>since=all</code>).</p> <div class=highlight><pre><span></span><code>curl -s &quot;ntfy.sh/mytopic/json?poll=1&quot;
</code></pre></div> <h3 id=fetch-cached-messages>Fetch cached messages<a class=headerlink href=#fetch-cached-messages title="Permanent link">&para;</a></h3> <p>Messages may be cached for a couple of hours (see <a href=../../config/#message-cache>message caching</a>) to account for network interruptions of subscribers. If the server has configured message caching, you can read back what you missed by using the <code>since=</code> query parameter. It takes a duration (e.g. <code>10m</code> or <code>30s</code>), a Unix timestamp (e.g. <code>1635528757</code>), a message ID (e.g. <code>nFS3knfcQ1xe</code>), or <code>all</code> (all cached messages).</p> <div class=highlight><pre><span></span><code>curl -s &quot;ntfy.sh/mytopic/json?since=10m&quot;
curl -s &quot;ntfy.sh/mytopic/json?since=1645970742&quot;
curl -s &quot;ntfy.sh/mytopic/json?since=nFS3knfcQ1xe&quot;
</code></pre></div> <h3 id=fetch-scheduled-messages>Fetch scheduled messages<a class=headerlink href=#fetch-scheduled-messages title="Permanent link">&para;</a></h3> <p>Messages that are <a href=../../publish/#scheduled-delivery>scheduled to be delivered</a> at a later date are not typically returned when subscribing via the API, which makes sense, because after all, the messages have technically not been delivered yet. To also return scheduled messages from the API, you can use the <code>scheduled=1</code> (alias: <code>sched=1</code>) parameter (makes most sense with the <code>poll=1</code> parameter):</p> <div class=highlight><pre><span></span><code>curl -s &quot;ntfy.sh/mytopic/json?poll=1&amp;sched=1&quot;
</code></pre></div> <h3 id=filter-messages>Filter messages<a class=headerlink href=#filter-messages title="Permanent link">&para;</a></h3> <p>You can filter which messages are returned based on the well-known message fields <code>id</code>, <code>message</code>, <code>title</code>, <code>priority</code> and <code>tags</code>. Here's an example that only returns messages of high or urgent priority that contains the both tags "zfs-error" and "error". Note that the <code>priority</code> filter is a logical OR and the <code>tags</code> filter is a logical AND. </p> <div class=highlight><pre><span></span><code>$ curl &quot;ntfy.sh/alerts/json?priority=high&amp;tags=zfs-error&quot;
{&quot;id&quot;:&quot;0TIkJpBcxR&quot;,&quot;time&quot;:1640122627,&quot;event&quot;:&quot;open&quot;,&quot;topic&quot;:&quot;alerts&quot;}
{&quot;id&quot;:&quot;X3Uzz9O1sM&quot;,&quot;time&quot;:1640122674,&quot;event&quot;:&quot;message&quot;,&quot;topic&quot;:&quot;alerts&quot;,&quot;priority&quot;:4,
  &quot;tags&quot;:[&quot;error&quot;, &quot;zfs-error&quot;], &quot;message&quot;:&quot;ZFS pool corruption detected&quot;}
</code></pre></div> <p>Available filters (all case-insensitive):</p> <table> <thead> <tr> <th>Filter variable</th> <th>Alias</th> <th>Example</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>id</code></td> <td><code>X-ID</code></td> <td><code>ntfy.sh/mytopic/json?poll=1&amp;id=pbkiz8SD7ZxG</code></td> <td>Only return messages that match this exact message ID</td> </tr> <tr> <td><code>message</code></td> <td><code>X-Message</code>, <code>m</code></td> <td><code>ntfy.sh/mytopic/json?message=lalala</code></td> <td>Only return messages that match this exact message string</td> </tr> <tr> <td><code>title</code></td> <td><code>X-Title</code>, <code>t</code></td> <td><code>ntfy.sh/mytopic/json?title=some+title</code></td> <td>Only return messages that match this exact title string</td> </tr> <tr> <td><code>priority</code></td> <td><code>X-Priority</code>, <code>prio</code>, <code>p</code></td> <td><code>ntfy.sh/mytopic/json?p=high,urgent</code></td> <td>Only return messages that match <em>any priority listed</em> (comma-separated)</td> </tr> <tr> <td><code>tags</code></td> <td><code>X-Tags</code>, <code>tag</code>, <code>ta</code></td> <td><code>ntfy.sh/mytopic?/jsontags=error,alert</code></td> <td>Only return messages that match <em>all listed tags</em> (comma-separated)</td> </tr> </tbody> </table> <h3 id=subscribe-to-multiple-topics>Subscribe to multiple topics<a class=headerlink href=#subscribe-to-multiple-topics title="Permanent link">&para;</a></h3> <p>It's possible to subscribe to multiple topics in one HTTP call by providing a comma-separated list of topics in the URL. This allows you to reduce the number of connections you have to maintain:</p> <div class=highlight><pre><span></span><code>$ curl -s ntfy.sh/mytopic1,mytopic2/json
{&quot;id&quot;:&quot;0OkXIryH3H&quot;,&quot;time&quot;:1637182619,&quot;event&quot;:&quot;open&quot;,&quot;topic&quot;:&quot;mytopic1,mytopic2,mytopic3&quot;}
{&quot;id&quot;:&quot;dzJJm7BCWs&quot;,&quot;time&quot;:1637182634,&quot;event&quot;:&quot;message&quot;,&quot;topic&quot;:&quot;mytopic1&quot;,&quot;message&quot;:&quot;for topic 1&quot;}
{&quot;id&quot;:&quot;Cm02DsxUHb&quot;,&quot;time&quot;:1637182643,&quot;event&quot;:&quot;message&quot;,&quot;topic&quot;:&quot;mytopic2&quot;,&quot;message&quot;:&quot;for topic 2&quot;}
</code></pre></div> <h3 id=authentication>Authentication<a class=headerlink href=#authentication title="Permanent link">&para;</a></h3> <p>Depending on whether the server is configured to support <a href=../../config/#access-control>access control</a>, some topics may be read/write protected so that only users with the correct credentials can subscribe or publish to them. To publish/subscribe to protected topics, you can:</p> <ul> <li>Use <a href=../../publish/#basic-auth>basic auth</a>, e.g. <code>Authorization: Basic dGVzdHVzZXI6ZmFrZXBhc3N3b3Jk</code></li> <li>or use the <a href=../../publish/#query-param><code>auth</code> query parameter</a>, e.g. <code>?auth=QmFzaWMgZEdWemRIVnpaWEk2Wm1GclpYQmhjM04zYjNKaw</code></li> </ul> <p>Please refer to the <a href=../../publish/#authentication>publishing documentation</a> for additional details.</p> <h2 id=json-message-format>JSON message format<a class=headerlink href=#json-message-format title="Permanent link">&para;</a></h2> <p>Both the <a href=#subscribe-as-json-stream><code>/json</code> endpoint</a> and the <a href=#subscribe-as-sse-stream><code>/sse</code> endpoint</a> return a JSON format of the message. It's very straight forward:</p> <p><strong>Message</strong>:</p> <table> <thead> <tr> <th>Field</th> <th>Required</th> <th>Type</th> <th>Example</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>id</code></td> <td>✔️</td> <td><em>string</em></td> <td><code>hwQ2YpKdmg</code></td> <td>Randomly chosen message identifier</td> </tr> <tr> <td><code>time</code></td> <td>✔️</td> <td><em>number</em></td> <td><code>1635528741</code></td> <td>Message date time, as Unix time stamp</td> </tr> <tr> <td><code>expires</code></td> <td>(✔)️</td> <td><em>number</em></td> <td><code>1673542291</code></td> <td>Unix time stamp indicating when the message will be deleted, not set if <code>Cache: no</code> is sent</td> </tr> <tr> <td><code>event</code></td> <td>✔️</td> <td><code>open</code>, <code>keepalive</code>, <code>message</code>, or <code>poll_request</code></td> <td><code>message</code></td> <td>Message type, typically you'd be only interested in <code>message</code></td> </tr> <tr> <td><code>topic</code></td> <td>✔️</td> <td><em>string</em></td> <td><code>topic1,topic2</code></td> <td>Comma-separated list of topics the message is associated with; only one for all <code>message</code> events, but may be a list in <code>open</code> events</td> </tr> <tr> <td><code>message</code></td> <td>-</td> <td><em>string</em></td> <td><code>Some message</code></td> <td>Message body; always present in <code>message</code> events</td> </tr> <tr> <td><code>title</code></td> <td>-</td> <td><em>string</em></td> <td><code>Some title</code></td> <td>Message <a href=../../publish/#message-title>title</a>; if not set defaults to <code>ntfy.sh/&lt;topic&gt;</code></td> </tr> <tr> <td><code>tags</code></td> <td>-</td> <td><em>string array</em></td> <td><code>["tag1","tag2"]</code></td> <td>List of <a href=../../publish/#tags-emojis>tags</a> that may or not map to emojis</td> </tr> <tr> <td><code>priority</code></td> <td>-</td> <td><em>1, 2, 3, 4, or 5</em></td> <td><code>4</code></td> <td>Message <a href=../../publish/#message-priority>priority</a> with 1=min, 3=default and 5=max</td> </tr> <tr> <td><code>click</code></td> <td>-</td> <td><em>URL</em></td> <td><code>https://example.com</code></td> <td>Website opened when notification is <a href=../../publish/#click-action>clicked</a></td> </tr> <tr> <td><code>actions</code></td> <td>-</td> <td><em>JSON array</em></td> <td><em>see <a href=../../publish/#action-buttons>actions buttons</a></em></td> <td><a href=../../publish/#action-buttons>Action buttons</a> that can be displayed in the notification</td> </tr> <tr> <td><code>attachment</code></td> <td>-</td> <td><em>JSON object</em></td> <td><em>see below</em></td> <td>Details about an attachment (name, URL, size, ...)</td> </tr> </tbody> </table> <p><strong>Attachment</strong> (part of the message, see <a href=../../publish/#attachments>attachments</a> for details):</p> <table> <thead> <tr> <th>Field</th> <th>Required</th> <th>Type</th> <th>Example</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>name</code></td> <td>✔️</td> <td><em>string</em></td> <td><code>attachment.jpg</code></td> <td>Name of the attachment, can be overridden with <code>X-Filename</code>, see <a href=../../publish/#attachments>attachments</a></td> </tr> <tr> <td><code>url</code></td> <td>✔️</td> <td><em>URL</em></td> <td><code>https://example.com/file.jpg</code></td> <td>URL of the attachment</td> </tr> <tr> <td><code>type</code></td> <td>-️</td> <td><em>mime type</em></td> <td><code>image/jpeg</code></td> <td>Mime type of the attachment, only defined if attachment was uploaded to ntfy server</td> </tr> <tr> <td><code>size</code></td> <td>-️</td> <td><em>number</em></td> <td><code>33848</code></td> <td>Size of the attachment in bytes, only defined if attachment was uploaded to ntfy server</td> </tr> <tr> <td><code>expires</code></td> <td>-️</td> <td><em>number</em></td> <td><code>1635528741</code></td> <td>Attachment expiry date as Unix time stamp, only defined if attachment was uploaded to ntfy server</td> </tr> </tbody> </table> <p>Here's an example for each message type:</p> <div class="tabbed-set tabbed-alternate" data-tabs=5:5><input checked=checked id=__tabbed_5_1 name=__tabbed_5 type=radio><input id=__tabbed_5_2 name=__tabbed_5 type=radio><input id=__tabbed_5_3 name=__tabbed_5 type=radio><input id=__tabbed_5_4 name=__tabbed_5 type=radio><input id=__tabbed_5_5 name=__tabbed_5 type=radio><div class=tabbed-labels><label for=__tabbed_5_1>Notification message</label><label for=__tabbed_5_2>Notification message (minimal)</label><label for=__tabbed_5_3>Open message</label><label for=__tabbed_5_4>Keepalive message</label><label for=__tabbed_5_5>Poll request message</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;sPs71M8A2T&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;time&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1643935928</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;expires&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1643936928</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;event&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;message&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;topic&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;mytopic&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;priority&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>        </span><span class=s2>&quot;warning&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=s2>&quot;skull&quot;</span>
<span class=w>    </span><span class=p>],</span>
<span class=w>    </span><span class=nt>&quot;click&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;https://homecam.mynet.lan/incident/1234&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;attachment&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;camera.jpg&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;image/png&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;size&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>33848</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;expires&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1643946728</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;url&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;https://ntfy.sh/file/sPs71M8A2T.png&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Unauthorized access detected&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Movement detected in the yard. You better go check&quot;</span>
<span class=p>}</span>
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;wze9zgqK41&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;time&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1638542110</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;expires&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1638543112</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;event&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;message&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;topic&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;phil_alerts&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Remote access to phils-laptop detected. Act right away.&quot;</span>
<span class=p>}</span>
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2pgIAaGrQ8&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;time&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1638542215</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;event&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;open&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;topic&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;phil_alerts&quot;</span>
<span class=p>}</span>
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;371sevb0pD&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;time&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1638542275</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;event&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;keepalive&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;topic&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;phil_alerts&quot;</span>
<span class=p>}</span>
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;371sevb0pD&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;time&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1638542275</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;event&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;poll_request&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;topic&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;phil_alerts&quot;</span>
<span class=p>}</span>
</code></pre></div> </div> </div> </div> <h2 id=list-of-all-parameters>List of all parameters<a class=headerlink href=#list-of-all-parameters title="Permanent link">&para;</a></h2> <p>The following is a list of all parameters that can be passed <strong>when subscribing to a message</strong>. Parameter names are <strong>case-insensitive</strong>, and can be passed as <strong>HTTP headers</strong> or <strong>query parameters in the URL</strong>. They are listed in the table in their canonical form.</p> <table> <thead> <tr> <th>Parameter</th> <th>Aliases (case-insensitive)</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>poll</code></td> <td><code>X-Poll</code>, <code>po</code></td> <td>Return cached messages and close connection</td> </tr> <tr> <td><code>since</code></td> <td><code>X-Since</code>, <code>si</code></td> <td>Return cached messages since timestamp, duration or message ID</td> </tr> <tr> <td><code>scheduled</code></td> <td><code>X-Scheduled</code>, <code>sched</code></td> <td>Include scheduled/delayed messages in message list</td> </tr> <tr> <td><code>id</code></td> <td><code>X-ID</code></td> <td>Filter: Only return messages that match this exact message ID</td> </tr> <tr> <td><code>message</code></td> <td><code>X-Message</code>, <code>m</code></td> <td>Filter: Only return messages that match this exact message string</td> </tr> <tr> <td><code>title</code></td> <td><code>X-Title</code>, <code>t</code></td> <td>Filter: Only return messages that match this exact title string</td> </tr> <tr> <td><code>priority</code></td> <td><code>X-Priority</code>, <code>prio</code>, <code>p</code></td> <td>Filter: Only return messages that match <em>any priority listed</em> (comma-separated)</td> </tr> <tr> <td><code>tags</code></td> <td><code>X-Tags</code>, <code>tag</code>, <code>ta</code></td> <td>Filter: Only return messages that match <em>all listed tags</em> (comma-separated)</td> </tr> </tbody> </table> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Made with ❤️ by Philipp C. Heckel </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/binwiederhier target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["search.suggest", "search.highlight", "search.share", "navigation.sections", "toc.integrate", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.d7c377c4.min.js></script> <script src=../../static/js/extra.js></script> </body> </html>